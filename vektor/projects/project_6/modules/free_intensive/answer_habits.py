from aiogram import types

from  loader import bot, dp
from modules.BotKeyboards import free_intensive_data, free_intensive_habits_2
from modules.DataBase import (
    get_animation_by_name,
    get_animation_by_name_tg_id,
    get_audio_by_name,
    get_photo_by_name_tg_id,
)


@dp.callback_query_handler(free_intensive_data.filter(filter="habits"))
async def process_answer_habits(call: types.CallbackQuery):
    await call.answer(cache_time=1)
    gif = get_animation_by_name_tg_id("—Ç–æ–ª—å–∫–æ —á–µ—Å—Ç–Ω–æ")
    text = (
        "–ê —Ç–µ–ø–µ—Ä—å –ø—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ.\n\n"
        "–í–æ—Ç —Å–∫–∞–∂—É —è –≤–∞–º –∑–∞–≤—Ç—Ä–∞: –≤—Å—ë, –ø–µ—Ä–µ—Å—Ç–∞—ë–º –µ—Å—Ç—å —Å–ª–∞–¥–∫–æ–µ –∏ –≤—Ä–µ–¥–Ω–æ–µ. –ù–µ–ª—å–∑—è üö´.\n"
        "–ü–æ–ª—É—á–∏—Ç—Å—è —É –≤–∞—Å –¥–æ–ª–≥–æ —Ç–∞–∫ –ø—Ä–æ–¥–µ—Ä–∂–∞—Ç—å—Å—è? –ë—É–¥–µ—Ç —Ö–æ—Ç–µ—Ç—å—Å—è —Å—ä–µ—Å—Ç—å —Å–ª–∞–¥–æ—Å—Ç–∏ –∏ –º—É—á–Ω–æ–µ –∏–ª–∏ –Ω–µ—Ç?\n"
        "–ü—Ä–æ–±–æ–≤–∞–ª–∏ –ª–∏ –≤—ã —É–∂–µ —Ç–∞–∫, –∏ –Ω–∞—Å–∫–æ–ª—å–∫–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –ø—Ä–æ—Å—Ç–æ —Å–µ–±–µ –∑–∞–ø—Ä–µ—Ç–∏—Ç—å?üëáüëáüëá\n\n"
        "1. ¬´–Ω–µ—Ç, —è —Å—Ä—ã–≤–∞—é—Å—å –∏ –Ω–∞–±–∏—Ä–∞—é –ø–æ—Ç–æ–º –≤–µ—Å –µ—â—ë –±–æ–ª—å—à–µ¬ª \n"
        "2. ¬´–Ω–µ –º–æ–≥—É –¥–æ–ª–≥–æ —Å–µ–±–µ –∑–∞–ø—Ä–µ—â–∞—Ç—å ‚Äì —Å—Ä—ã–≤–∞—é—Å—å –∏ –ø–æ—Ç–æ–º —á—É–≤—Å—Ç–≤–æ –≤–∏–Ω—ã –≥–ª–æ–∂–µ—Ç¬ª \n"
        "3. ¬´—è –¥–µ—Ä–∂—É—Å—å, –¥–æ–ª–≥–æ –º–æ–≥—É —Å–µ–±—è –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å¬ª \n"
    )
    await bot.send_animation(
        chat_id=call.from_user.id, caption=text, animation=gif, reply_markup=free_intensive_habits_2
    )


@dp.callback_query_handler(free_intensive_data.filter(filter="habits_2"))
async def process_answer_habits(call: types.CallbackQuery):
    await call.answer(cache_time=1)
    audio = get_audio_by_name("—Å–∏–ª–∞ –≤–æ–ª–∏")
    text = (
        "–•–æ—Ç–∏—Ç–µ –≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—â—É—é –∏—Å—Ç–æ—Ä–∏—é –ø—Ä–æ –º–∞–º—É 2—Ö –¥–µ—Ç–µ–π, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–Ω—å—à–µ –µ–ª–∞ –ø–∞–∫–µ—Ç–∞–º–∏ "
        "–∫–æ–Ω—Ñ–µ—Ç—ã, –∞ –Ω–∞ –∫—É—Ä—Å–µ ¬´–∫–∞–∫ –ø–æ –≤–æ–ª—à–µ–±—Å—Ç–≤—É¬ª –ø–µ—Ä–µ—Å—Ç–∞–ª–∞. –í —á—ë–º —Å–µ–∫—Ä–µ—Ç ‚Äì –≤ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ–º "
        "–ø–∏—Ç–∞–Ω–∏–∏. –ò, –∫–æ–Ω–µ—á–Ω–æ, –≤ –Ω–∞–ø–æ–ª–Ω—è—é—â–∏—Ö –π–æ–≥–∞-–ø—Ä–∞–∫—Ç–∏–∫–∞—Ö. –ê–Ω—è –ø—Ä–∏—à–ª–∞ –∫–æ –º–Ω–µ –≥–æ–¥ ¬´ –ù–∞–∑–∞–¥. –ü–æ—Å–ª–µ "
        "2—Ö –ö–°. –ó–Ω–∞–µ—Ç–µ, –æ–Ω–∞ –Ω–µ –≤–µ—Ä–∏–ª–∞, —á—Ç–æ –ø–æ–ª—É—á–∏—Ç—Å—è. –ù–æ —è –≤–µ—Ä–∏–ª–∞, —è –∑–Ω–∞–ª–∞-–∏ –ø–æ–ª—É—á–∏–ª–æ—Å—å:+1:\n"
        "–•–æ—Ç–∏—Ç–µ —Ç–∞–∫ –∂–µ?"
    )
    await bot.send_audio(chat_id=call.from_user.id, caption=text, audio=audio, reply_markup=None)
    photo = get_photo_by_name_tg_id("–∞–Ω—è")
    text = '–ö—Å—Ç–∞—Ç–∏, —Å ¬´—Ñ–∞—Ä—Ç—É–∫–æ–º¬ª –ø–æ—Å–ª–µ –ö–°, –∫–∞–∫ —É –ê–Ω–∏, –≤–∞–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –æ—Å–æ–±–µ–Ω–Ω–æ –±–µ—Ä–µ–∂–Ω–æ. –ú–Ω–æ–≥–∏–º –¥–µ–≤—É—à–∫–∞–º –Ω–µ–ø—Ä–∏—è—Ç–Ω–æ –¥–∞–∂–µ ' \
           '–ø—Ä–∏–∫–∞—Å–∞—Ç—å—Å—è –∫ —à–æ–≤—á–∏–∫—É... –ò —ç—Ç–æ –ø–æ–Ω—è—Ç–Ω–æ: –≤–µ–¥—å —Ç–∞–º —Å–ø–∞–µ—á–∫–∏... –ù–æ –ø—Ä–∏–≤–µ—Ä–Ω–æ–π —Ç–µ—Ö–Ω–∏–∫–µ –≤—Å—ë –ø–æ–ª—É—á–∞–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–∏—Ç—å' \
           ' üëå '
    await call.message.answer_photo(photo=photo, caption=text)
